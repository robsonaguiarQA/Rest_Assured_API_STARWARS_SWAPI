name: Run API Tests (Rest Assured)

on:
    schedule:
      # Toda sexta-feira Ã s 12:00 BR
      - cron: '0 15 * * 5'

    push:
      branches:
        - main
        - feature/*
    pull_request:
      branches:
        - main
        -
jobs:
    build:
      runs-on: ubuntu-latest

      steps:
        - name: Checkout repository
          uses: actions/checkout@v3

        - name: Set up JDK 20
          uses: actions/setup-java@v3
          with:
            distribution: 'temurin'
            java-version: '20'
            cache: 'maven'

        - name: Check Java and environment
          run: |
            echo "JAVA_HOME is: $JAVA_HOME"
            java -version
            mvn -v

        - name: Build and run tests
          run: mvn clean test -e -X